---
file:
  /app/app.py:
    exists: true
    mode: "0644"
    owner: "nonroot"
  /app:
    exists: true
    filetype: directory
    owner: "nonroot"

command:
  python --version:
    exit-status: 0
    stdout:
      - "Python 3"
    timeout: 5000
  # Test Python syntax of main app
  python -m py_compile /app/app.py:
    exit-status: 0
    timeout: 10000

user:
  nonroot:
    exists: true
    uid: 65532
    home: "/home/nonroot"

port:
  tcp:8080:
    listening: false  # Not listening until started